const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
 name: 'autosent',
 version: '10.0.4',
 hasPermssion: 0,
 credits: 'Priyansh Rajput (Modified by SUJON)',
 description: 'Automatically sends funny-love mixed messages based on time (BD Time)',
 commandCategory: 'group',
 usages: '',
 cooldowns: 3
};

const messages = [
 { time: '12:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢               â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[12:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
 { time: '1:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[01:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
 { time: '2:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[02:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
 { time: '3:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[03:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
 { time: '4:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[04:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
 { time: '5:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[05:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '6:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[06:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '7:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[07:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '8:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[08:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '9:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[09:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '10:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[10:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '11:30 AM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[11:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '12:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[12:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '1:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[01:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '2:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[02:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '3:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[03:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '4:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[04:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '5:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[05:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '6:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[06:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '7:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[07:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '8:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[08:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '9:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                 â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[09:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '10:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[10:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },
{ time: '11:30 PM', message: 'â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢                â•­â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•®Time:[11:30]â•°â€¢â”„â”…â•â•âââ•â•â”…â”„â€¢â•¯ , Notification From Raja                â€¢â”„â”…â•â•â•â•â•âðŸ’œââ•â•â•â•â•â”…â”„â€¢' },

];

module.exports.onLoad = ({ api }) => {
 console.log(chalk.green.bold('âœ… AutoSent Funny-Love Module Loaded (BD Time)'));

 messages.forEach(({ time, message }) => {
   const [hour, minute, period] = time.split(/[: ]/);
   let hour24 = parseInt(hour);
   if (period === 'PM' && hour !== '12') hour24 += 12;
   if (period === 'AM' && hour === '12') hour24 = 0;

   const rule = new schedule.RecurrenceRule();
   rule.tz = 'Asia/Dhaka';
   rule.hour = hour24;
   rule.minute = parseInt(minute);

   schedule.scheduleJob(rule, () => {
     if (!global.data?.allThreadID) return;
     global.data.allThreadID.forEach(threadID => {
       api.sendMessage(message, threadID, (err) => {
         if (err) console.error(`âŒ Error sending message to ${threadID}:`, err);
       });
     });
   });
 });

};

module.exports.run = () => {};
